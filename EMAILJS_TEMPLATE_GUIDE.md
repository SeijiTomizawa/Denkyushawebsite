# EmailJSテンプレート設定ガイド

このガイドでは、EmailJSのテンプレートが正しく設定されているか確認する方法を説明します。

## 📋 確認手順

### 1. EmailJSダッシュボードにアクセス

1. [EmailJS](https://www.emailjs.com/)にログイン
2. 左側メニューから **Email Templates** をクリック
3. テンプレート `template_vffjunb` を選択

---

## 🔍 テンプレート設定の確認

### テンプレート変数

フォームから送信される変数は以下の通りです：

| 変数名 | 説明 | 例 |
|--------|------|-----|
| `{{from_name}}` | お名前 | 山田 太郎 |
| `{{from_email}}` | メールアドレス | example@email.com |
| `{{company}}` | 会社名・団体名 | 株式会社〇〇 |
| `{{message}}` | お問い合わせ内容 | ウェブサイト制作について... |

### 推奨されるテンプレート設定

#### **件名（Subject）**
```
【電究社】新しいお問い合わせ - {{from_name}}様より
```

#### **本文（Content）**
```
電究社へのお問い合わせがありました。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ お問い合わせ情報
━━━━━━━━━━━━━━━━━━━━━━━━━━━━

お名前: {{from_name}}
メールアドレス: {{from_email}}
会社名・団体名: {{company}}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ お問い合わせ内容
━━━━━━━━━━━━━━━━━━━━━━━━━━━━

{{message}}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━

このメールは電究社のお問い合わせフォームから自動送信されました。
```

---

## ✅ メール送信の確認方法

### 1. ブラウザの開発者ツールを開く

1. お問い合わせフォームにアクセス
2. F12キーまたは右クリック → 「検証」で開発者ツールを開く
3. **Console**タブを選択

### 2. フォームを送信

テスト用のデータを入力して送信：

- **お名前**: テスト太郎
- **メールアドレス**: test@example.com
- **会社名**: テスト株式会社
- **お問い合わせ内容**: これはテストメッセージです。

### 3. コンソールログを確認

送信ボタンをクリックすると、以下のログが表示されるはずです：

```
✅ 正常な場合:
📧 フォーム送信開始
送信データ: {name: "テスト太郎", email: "test@example.com", ...}
EmailJS設定: {serviceId: "service_okm53ng", templateId: "template_vffjunb", publicKey: "設定済み"}
📤 EmailJS送信中... {from_name: "テスト太郎", ...}
✅ EmailJS送信結果: {status: 200, text: "OK"}
🎉 メール送信成功！
📧 フォーム送信処理完了
```

```
❌ エラーの場合:
📧 フォーム送信開始
...
❌ 送信エラー: Error: ...
エラーメッセージ: ...
```

### 4. EmailJSのActivityログを確認

1. [EmailJS Dashboard](https://dashboard.emailjs.com/)にアクセス
2. 左側メニューから **Activity** をクリック
3. 最新の送信履歴を確認

**確認ポイント:**
- ✅ 送信履歴が表示されている → EmailJSまでは届いている
- ❌ 送信履歴がない → フロントエンドの設定に問題あり

### 5. メールボックスを確認

1. EmailJSのEmail Serviceで設定したメールアドレスを確認
2. 受信トレイにメールが届いているか確認
3. 届いていない場合は**迷惑メールフォルダ**も確認

---

## 🔧 トラブルシューティング

### ケース1: コンソールに "❌ 送信エラー: Error 401" が表示される

**原因:** Public Key、Service ID、Template IDのいずれかが間違っている

**解決策:**
1. EmailJSダッシュボードで以下を確認：
   - Service ID: `service_okm53ng`
   - Template ID: `template_vffjunb`
   - Public Key: `e-GUfAZt_TrCL8nGB`
2. `.env.local` ファイルの値を確認
3. 開発サーバーを再起動

### ケース2: "🎉 メール送信成功！" が表示されるが、メールが届かない

**原因:** EmailJSのEmail Service設定に問題がある

**解決策:**
1. EmailJSダッシュボードで **Email Services** を確認
2. 正しいメールアドレスが設定されているか確認
3. Email Serviceの接続が有効になっているか確認
4. Gmailの場合、セキュリティ設定を確認

### ケース3: EmailJS Activityに履歴は表示されるが、メールが届かない

**原因:** メールサービスの認証やフィルタリングの問題

**解決策:**
1. 迷惑メールフォルダを確認
2. EmailJSのEmail Serviceを再接続
3. 別のメールアドレスでテスト
4. EmailJSの [Email Services Guide](https://www.emailjs.com/docs/email-services/) を参照

### ケース4: テンプレート変数が表示されない

**原因:** テンプレートで使用している変数名とコードの変数名が一致していない

**解決策:**
1. コンソールログで送信している変数を確認
2. EmailJSのテンプレートで使用している変数名を確認
3. 変数名を一致させる（例: `{{from_name}}`, `{{from_email}}`, `{{company}}`, `{{message}}`）

---

## 📊 送信データの詳細

フォームから送信される実際のデータ構造：

```javascript
{
  from_name: "山田 太郎",           // お名前
  from_email: "example@email.com", // メールアドレス
  company: "株式会社〇〇",          // 会社名（未入力の場合は "未入力"）
  message: "お問い合わせ内容..."   // お問い合わせ内容
}
```

---

## 🎯 次のステップ

1. ✅ ブラウザのコンソールでログを確認
2. ✅ EmailJSのActivityログを確認
3. ✅ メールボックスを確認（迷惑メールフォルダも）
4. ✅ 必要に応じてEmailJSのテンプレートを調整

---

## 📞 サポート

それでも問題が解決しない場合：

1. ブラウザのコンソールログのスクリーンショットを撮る
2. EmailJS Activityログのスクリーンショットを撮る
3. [EmailJS Support](https://www.emailjs.com/docs/) を参照
